const Thread = require('../models/Thread');

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
exports.createThread = (req, res, next) => {
    const thread = new Thread({
        name: req.body.name,
        description: req.body.description,
        createdAt: Date.now()
    });
    
    thread.save()
        .then(() => res.status(201).json({
            thread: {
                threadId: thread._id,
                name: req.body.name,
                description: req.body.description,
                createdAt: thread.createdAt
            }
        }))
        .catch(error => res.status(400).json({ error }));
};

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
exports.getAllThreads = (req, res, next) => {
    Thread.find()
        .then(threads => res.status(200).json(threads))
        .catch(error => res.status(400).json({ error }));
};

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
exports.getThread = (req, res, next) => {
    Thread.findOne({ _id: req.params.threadId })
        .then(thread => res.status(200).json(thread))
        .catch(error => res.status(404).json({ error }));
};

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
exports.modifyThread = (req, res, next) => {
    Thread.updateOne({ _id: req.params.threadId }, { ...req.body, _id: req.params.threadId })
        .then(() => {
            Thread.findOne({ _id: req.params.threadId })
                .then(thread => res.status(200).json(thread))
                .catch(error => res.status(404).json({ error }));
        })
        .catch(error => res.status(400).json({ error }));
};

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
exports.deleteThread = (req, res, next) => {};

//messages
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
exports.postMessage = (req, res, next) => {};

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
exports.getAllMessage = (req, res, next) => {};

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
exports.getMessage = (req, res, next) => {};

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
exports.modifyMessage = (req, res, next) => {};

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
exports.deleteMessage = (req, res, next) => {};

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
exports.postGif = (req, res, next) => {};